<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ - Kawaki</title>
<style>
  body { font-family: Arial, sans-serif; direction: rtl; background: #f7f7f7; padding: 20px; }
  .container {
    background: white; padding: 20px; max-width: 600px; margin: auto; border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h2 { color: #2c3e50; text-align: center; margin-bottom: 20px; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
  th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: center; }
  input[type="number"] {
    width: 60px; padding: 5px; text-align: center; border: 1px solid #ccc; border-radius: 4px;
  }
  label { display: block; margin-bottom: 5px; }
  input[type="text"], input[type="tel"] {
    width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;
  }
  button {
    background-color: #27ae60; color: white; padding: 10px 20px; border: none; border-radius: 4px;
    cursor: pointer; font-size: 16px;
  }
  button:hover {
    background-color: #219150;
  }
  a.home-link {
    display: inline-block; margin-bottom: 15px; color: #27ae60; font-weight: bold;
    text-decoration: none; font-size: 16px;
  }
  a.home-link:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<div class="container">
  <a href="index.html" class="home-link">ğŸ  Home</a>

  <h2>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</h2>

  <table id="cartTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
        <th>Ø§Ù„Ø³Ø¹Ø± (Ø¯.Øª)</th>
        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
        <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
        <th>Ø­Ø°Ù</th>
      </tr>
    </thead>
    <tbody>
      <!-- Ù‡Ù†Ø§ ØªÙˆØ¶Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© -->
    </tbody>
  </table>

  <h3>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: <span id="totalPrice">0</span> Ø¯.Øª</h3>

  <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
  <form id="orderForm">
    <label>Ø§Ù„Ø§Ø³Ù…:</label>
    <input type="text" name="name" required />
    <label>Ø§Ù„Ù‡Ø§ØªÙ:</label>
    <input type="tel" name="phone" required />
    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
    <input type="text" name="address" required />

    <input type="hidden" name="paymentMethod" value="Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…" />

    <button type="submit">Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
  </form>
</div>

<script>
// Ø¬Ù„Ø¨ Ø§Ù„Ø³Ù„Ø© Ù…Ù† localStorage
function getCart() {
  const cart = localStorage.getItem('kawakiCart');
  return cart ? JSON.parse(cart) : [];
}

// Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø© ÙÙŠ localStorage
function saveCart(cart) {
  localStorage.setItem('kawakiCart', JSON.stringify(cart));
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
function displayCart() {
  const cart = getCart();
  const tbody = document.querySelector('#cartTable tbody');
  tbody.innerHTML = '';

  let total = 0;

  cart.forEach((item, index) => {
    const itemTotal = item.price * item.quantity;
    total += itemTotal;

    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${item.name}</td>
      <td>${item.price}</td>
      <td><input type="number" min="1" value="${item.quantity}" data-index="${index}" class="qtyInput" /></td>
      <td>${itemTotal}</td>
      <td><button data-index="${index}" class="deleteBtn">Ø­Ø°Ù</button></td>
    `;
    tbody.appendChild(tr);
  });

  document.getElementById('totalPrice').textContent = total;
  return total;
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ±Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
document.addEventListener('input', function(e){
  if(e.target.classList.contains('qtyInput')){
    const index = e.target.getAttribute('data-index');
    let newQty = parseInt(e.target.value);
    if (isNaN(newQty) || newQty < 1) newQty = 1;

    const cart = getCart();
    cart[index].quantity = newQty;
    saveCart(cart);
    displayCart();
    updateCartButtonCount();
  }
});

// Ø­Ø°Ù Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©
document.addEventListener('click', function(e){
  if(e.target.classList.contains('deleteBtn')){
    const index = e.target.getAttribute('data-index');
    const cart = getCart();
    cart.splice(index, 1);
    saveCart(cart);
    displayCart();
    updateCartButtonCount();
  }
});

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø© ÙÙŠ Ø²Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
function updateCartButtonCount() {
  const cart = getCart();
  let count = 0;
  cart.forEach(item => count += item.quantity);
  // Ù†Ø³ØªØ®Ø¯Ù… localStorage Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø¯ (ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ± Ø­Ø³Ø¨ Ø­Ø§Ø¬ØªÙƒ)
  localStorage.setItem('cartCount', count);
}

document.getElementById('orderForm').addEventListener('submit', function(e){
  e.preventDefault();
  const cart = getCart();
  if (cart.length === 0) {
    alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©! Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª.');
    return;
  }

  const formData = new FormData(this);

  let orderSummary = 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:\n\n';
  let total = 0;
  cart.forEach(item => {
    const itemTotal = item.price * item.quantity;
    total += itemTotal;
    orderSummary += `${item.name} Ã— ${item.quantity} = ${itemTotal} Ø¯.Øª\n`;
  });
  orderSummary += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total} Ø¯.Øª\n\n`;
  orderSummary += `Ø§Ù„Ø§Ø³Ù…: ${formData.get('name')}\nØ§Ù„Ù‡Ø§ØªÙ: ${formData.get('phone')}\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${formData.get('address')}\nØ·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…`;

  alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!\n\n' + orderSummary);

  // Ø¨Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù†Ù†Ø¸Ù Ø§Ù„Ø³Ù„Ø©
  localStorage.removeItem('kawakiCart');
  updateCartButtonCount();
  this.reset();
  displayCart();
});

// Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© Ø£ÙˆÙ„ Ù…Ø§ ØªØ­Ù…Ù„ Ø§Ù„ØµÙØ­Ø©
displayCart();
updateCartButtonCount();
</script>

</body>
</html>
